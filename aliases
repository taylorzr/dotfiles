# TODO: Covert to function so that the subcommand `bundle list --paths`
# doesn't execute at shell load time
alias tags="ctags -R --languages=ruby,sh --exclude=.git --exclude=log ."
# alias tags="ctags -R --languages=ruby,sh --exclude=.git --exclude=log . $(bundle list --paths)"

alias gl='git log'
alias gs="git status"
alias ga="git add"
alias gap="git add --patch"
alias gd="git diff"
alias gds="git diff --staged"
alias gc='git commit --verbose'
alias gcm='git commit --message'
alias gco='git checkout'
alias gnb='git checkout -b'
alias gp='git push'
alias gf='git fetch'

alias good="git bisect good"
alias bad="git bisect bad"

alias ber="bundle exec rspec"
alias berc="BROWSER=chrome ber"

alias rc="bundle exec rails console"
alias gbrc="RAILS_LOCALE=en-GB rc"
alias rs="bundle exec rails server"

alias dbr="RAILS_ENV=development be rake db:reset"
alias dbrt="RAILS_ENV=test be rake db:reset db:seed"
alias dbrab="be rake db:reset db:spec:seed"

alias ru="rubocop -a"

alias hrc="heroku run rails console"
alias hl="heroku logs -t"
alias hr="heroku run"
alias hcs="heroku config:set"

alias dm="docker-machine"
alias dc="docker-compose"

alias rabbit="rabbitmqctl"

alias post="curl -X POST -H Content-Type:application/json"

alias k="kubectl"
alias mk="minikube"

alias reload='reload_tmux && reload_zsh'
alias reload_zsh='source ~/.zshrc && echo Zsh config reloaded!'
alias reload_tmux='tmux source-file ~/.tmux.conf && echo "Tmux config reloaded!"'

alias s='brew services'
alias sl='brew services list'

alias is='iex -S mix'

alias vim='nvim'

function pg {
  if [ -z ${1+x} ]; then
    brew services list
  else
    brew services $1 postgresql94
  fi
}

function redis {
  if [ -z ${1+x} ]; then
    brew services list
  else
    brew services $1 redis
  fi
}

function rabbitmq {
  if [ -z ${1+x} ]; then
    brew services list
  else
    brew services $1 rabbitmq
  fi
}

function tmux_create_and_switch_to_session  {
  tmux new-session -d -s $1 -c ~/$1 # If it already exists, tmux just says 'duplicate sesssion: $1'
  tmux switch -t $1
  # Maybe creating 2 panes and starting vim in top?
}

alias project='tmux_create_and_switch_to_session'
alias ta='tmux attach'
alias td='tmux detach'
alias tl='tmux list-sessions'
alias ts='tmux switch -t'
alias tk='tmux kill-session -t'
alias tn='tmux_create_and_switch_to_session'

function clear_heroku_build_cache {
  heroku repo:gc --app $1
  heroku repo:purge_cache --app $1
}

# Inject hub into git (https://github.com/github/hub#aliasing)
eval "$(hub alias -s)"
